{
  "comments": [
    {
      "key": {
        "uuid": "2ba326fd_12ad9eef",
        "filename": "wmf-config/CirrusSearch-production.php",
        "patchSetId": 17
      },
      "lineNbr": 47,
      "author": {
        "id": 776
      },
      "writtenOn": "2018-11-29T19:36:30Z",
      "side": 1,
      "message": "This is going to have replica \u003d\u003e \u0027eqiad\u0027, which means in total the eqiad replica will have the groups: default, khi, psi, omega.\n\nI think you\u0027re aware of this and handle it below in wgCirrusSearchWriteClusters, but i\u0027m not following how yet.",
      "revId": "9a342f288fc791fceb8d3c4bca2ecd3916e9d025",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5717ccbb_ebb95cb2",
        "filename": "wmf-config/CirrusSearch-production.php",
        "patchSetId": 17
      },
      "lineNbr": 47,
      "author": {
        "id": 776
      },
      "writtenOn": "2018-11-29T19:43:57Z",
      "side": 1,
      "message": "i get it now. It seems:\n\n* wgCirrusSearchReplicaGroup \u003d \u0027default\u0027\n\nSo anything assigned \u0027eqiad\u0027 will only write to the primary cluster. The round robin is temporarily handled in CirrusSearchWriteClusters to write to top level clusters. round robin is given explicit group lists so it doesn\u0027t really matter which groups are part of the replica.",
      "parentUuid": "2ba326fd_12ad9eef",
      "revId": "9a342f288fc791fceb8d3c4bca2ecd3916e9d025",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6213bb67_80bcda81",
        "filename": "wmf-config/CirrusSearch-production.php",
        "patchSetId": 17
      },
      "lineNbr": 47,
      "author": {
        "id": 2638
      },
      "writtenOn": "2018-11-30T09:23:05Z",
      "side": 1,
      "message": "yes basically the new clusters eqiad-[khi|psi|omega] are ignored because they are not in the group.\nAs for eqiad-temp-[khi|psi|omega] I agree that it\u0027s a bit misleading since I use the default values, in short it fakes 4 new replicas that we write to use using the hack in CirrusSearchWriteClusters\n\nWhile writing this I realiazed that I probably misunderstood the technique you suggested in phab...",
      "parentUuid": "5717ccbb_ebb95cb2",
      "revId": "9a342f288fc791fceb8d3c4bca2ecd3916e9d025",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}